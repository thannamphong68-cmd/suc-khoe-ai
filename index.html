<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Health Expert Pro - Báo Cáo Chuyên Sâu</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;600;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --primary: #2563eb; --secondary: #7c3aed; --accent: #06b6d4;
            --success: #10b981; --warning: #f59e0b; --danger: #ef4444;
            --bg-body: #f8fafc; --bg-card: #ffffff; --text-main: #0f172a;
            --text-sub: #64748b; --border: #e2e8f0;
        }

        [data-theme="dark"] {
            --bg-body: #020617; --bg-card: #0f172a; --text-main: #f1f5f9;
            --text-sub: #94a3b8; --border: #1e293b;
        }

        * { transition: all 0.2s ease; box-sizing: border-box; }
        body { font-family: 'Plus Jakarta Sans', sans-serif; background: var(--bg-body); color: var(--text-main); margin: 0; }

        /* Navbar */
        .nav { display: flex; justify-content: space-between; align-items: center; padding: 15px 5%; background: var(--bg-card); border-bottom: 1px solid var(--border); }
        .theme-btn { background: var(--bg-body); border: 1px solid var(--border); padding: 8px 15px; border-radius: 20px; cursor: pointer; color: var(--text-main); }

        .container { max-width: 1200px; margin: 30px auto; padding: 0 20px; }

        /* Header Info */
        .header-card { 
            background: linear-gradient(135deg, var(--primary), var(--secondary)); 
            color: white; border-radius: 24px; padding: 35px; margin-bottom: 30px;
            box-shadow: 0 20px 25px -5px rgba(37, 99, 235, 0.2);
        }

        /* Layout */
        .main-layout { display: grid; grid-template-columns: 350px 1fr; gap: 25px; }
        @media (max-width: 1024px) { .main-layout { grid-template-columns: 1fr; } }

        .card { background: var(--bg-card); border-radius: 20px; padding: 25px; border: 1px solid var(--border); margin-bottom: 25px; box-shadow: 0 1px 3px rgba(0,0,0,0.1); }
        .section-title { font-weight: 700; font-size: 1.1rem; margin-bottom: 20px; display: flex; align-items: center; gap: 10px; color: var(--primary); }

        /* Form */
        .input-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; font-size: 0.85rem; font-weight: 600; }
        input, select { width: 100%; padding: 12px; border-radius: 12px; border: 1px solid var(--border); background: var(--bg-body); color: var(--text-main); }

        /* AI Report Styling */
        .report-section { border-left: 4px solid var(--primary); padding-left: 20px; margin-bottom: 30px; }
        .grid-3 { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 15px; }
        @media (max-width: 768px) { .grid-3 { grid-template-columns: 1fr; } }

        .status-box { padding: 15px; border-radius: 15px; background: var(--bg-body); border: 1px solid var(--border); }
        .status-box i { font-size: 1.5rem; margin-bottom: 10px; display: block; }

        /* Meal & Routine Table */
        .plan-table { width: 100%; border-collapse: collapse; margin-top: 15px; }
        .plan-table td { padding: 12px; border-bottom: 1px solid var(--border); font-size: 0.9rem; }
        .time-tag { background: var(--primary); color: white; padding: 3px 10px; border-radius: 20px; font-size: 0.75rem; }

        .btn-analyze { width: 100%; padding: 15px; border-radius: 15px; border: none; background: var(--primary); color: white; font-weight: 700; cursor: pointer; font-size: 1rem; }
        .btn-analyze:hover { background: var(--secondary); transform: scale(1.02); }

        .history-item { display: flex; align-items: center; gap: 10px; margin-bottom: 8px; font-size: 0.85rem; }
        .chart-box { height: 200px; }
    </style>
</head>
<body data-theme="light">

    <div class="nav">
        <div style="font-weight: 800; font-size: 1.4rem;"><i class="fas fa-heartbeat" style="color:var(--danger)"></i> AI HEALTH REPORT</div>
        <button class="theme-btn" onclick="toggleTheme()"><i class="fas fa-adjust"></i> Chế độ sáng/tối</button>
    </div>

    <div class="container">
        <div class="header-card">
            <h2 style="margin:0">Báo cáo Sức khỏe Thông minh</h2>
            <p id="quote-box" style="opacity: 0.9; font-weight: 300; margin-top: 10px;"></p>
        </div>

        <div class="main-layout">
            <div class="sidebar">
                <div class="card">
                    <div class="section-title"><i class="fas fa-user-edit"></i> Hồ sơ cá nhân</div>
                    <form id="healthForm">
                        <div class="input-group">
                            <label>Họ và Tên</label>
                            <input type="text" id="name" placeholder="Nguyễn Văn A" required>
                        </div>
                        <div style="display:grid; grid-template-columns: 1fr 1fr; gap:10px">
                            <div class="input-group">
                                <label>Tuổi</label>
                                <input type="number" id="age" required>
                            </div>
                            <div class="input-group">
                                <label>Cân nặng (kg)</label>
                                <input type="number" id="weight" required>
                            </div>
                        </div>
                        <div class="input-group">
                            <label>Chiều cao (cm)</label>
                            <input type="number" id="height" required>
                        </div>
                        <div class="input-group">
                            <label>Giờ ngủ mỗi ngày</label>
                            <select id="sleep">
                                <option value="4">Dưới 5 giờ (Rất ít)</option>
                                <option value="6">5 - 7 giờ (Trung bình)</option>
                                <option value="8" selected>7 - 9 giờ (Lý tưởng)</option>
                            </select>
                        </div>
                        <div class="input-group">
                            <label>Mức độ vận động</label>
                            <select id="exercise">
                                <option value="1">Ít vận động (Văn phòng)</option>
                                <option value="3" selected>Vừa phải (3 buổi/tuần)</option>
                                <option value="5">Vận động cao (Hàng ngày)</option>
                            </select>
                        </div>
                        <button type="submit" class="btn-analyze">XUẤT BÁO CÁO AI</button>
                        <button type="button" onclick="resetForm()" style="width:100%; background:none; border:none; color:var(--danger); margin-top:10px; cursor:pointer">Đặt lại dữ liệu</button>
                    </form>
                </div>

                <div class="card">
                    <div class="section-title"><i class="fas fa-history"></i> Lịch sử phân tích</div>
                    <div id="history-list"></div>
                </div>
            </div>

            <div class="main-content">
                <div class="card" id="empty-state" style="text-align:center; padding: 100px 0;">
                    <i class="fas fa-robot" style="font-size: 4rem; color: var(--border); margin-bottom: 20px;"></i>
                    <h3>Hệ thống AI đã sẵn sàng</h3>
                    <p>Nhập thông tin của bạn để nhận bản báo cáo chi tiết về Ăn - Ngủ - Tập luyện.</p>
                </div>

                <div id="report-content" style="display: none;">
                    <div class="card">
                        <div class="section-title"><i class="fas fa-poll"></i> Đánh giá tổng quát</div>
                        <div class="grid-3">
                            <div class="status-box">
                                <i class="fas fa-weight" style="color:var(--primary)"></i>
                                <small>Chỉ số BMI</small>
                                <h2 id="bmi-val" style="margin:5px 0">--</h2>
                                <span id="bmi-status" style="font-size:0.8rem; font-weight:700"></span>
                            </div>
                            <div class="status-box">
                                <i class="fas fa-bed" style="color:var(--secondary)"></i>
                                <small>Chất lượng Ngủ</small>
                                <h2 id="sleep-status" style="margin:5px 0">--</h2>
                                <span style="font-size:0.8rem">Dựa trên giờ ngủ</span>
                            </div>
                            <div class="status-box">
                                <i class="fas fa-fire" style="color:var(--danger)"></i>
                                <small>Năng lượng tiêu hao</small>
                                <h2 id="burn-val" style="margin:5px 0">--</h2>
                                <span style="font-size:0.8rem">kcal/ngày</span>
                            </div>
                        </div>

                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 25px;">
                            <div class="chart-box"><canvas id="chart1"></canvas></div>
                            <div class="chart-box"><canvas id="chart2"></canvas></div>
                        </div>
                    </div>

                    <div class="card" style="border-top: 5px solid var(--danger);">
                        <div class="section-title"><i class="fas fa-exclamation-triangle" style="color:var(--danger)"></i> Phê phán & Cảnh báo từ AI</div>
                        <p id="ai-critique" style="line-height:1.6; color: var(--text-sub)"></p>
                    </div>

                    <div class="card" style="border-top: 5px solid var(--success);">
                        <div class="section-title"><i class="fas fa-utensils" style="color:var(--success)"></i> Thực đơn & Thói quen khuyến nghị</div>
                        <table class="plan-table">
                            <tr>
                                <td width="100"><span class="time-tag">06:00 AM</span></td>
                                <td><strong>Thức dậy:</strong> Uống 300ml nước ấm. Tập nhẹ 10 phút.</td>
                            </tr>
                            <tr>
                                <td><span class="time-tag">07:30 AM</span></td>
                                <td><strong>Bữa sáng:</strong> <span id="meal-morning"></span></td>
                            </tr>
                            <tr>
                                <td><span class="time-tag">12:00 PM</span></td>
                                <td><strong>Bữa trưa:</strong> <span id="meal-noon"></span></td>
                            </tr>
                            <tr>
                                <td><span class="time-tag">17:00 PM</span></td>
                                <td><strong>Thể thao:</strong> <span id="sport-suggest"></span></td>
                            </tr>
                            <tr>
                                <td><span class="time-tag">22:30 PM</span></td>
                                <td><strong>Đi ngủ:</strong> Tắt thiết bị điện tử trước 30 phút.</td>
                            </tr>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const quotes = [
            "Sức khỏe là vàng, có sức khỏe là có tất cả.",
            "Ăn được ngủ được là tiên, không ăn không ngủ mất tiền thêm lo.",
            "Phòng bệnh hơn chữa bệnh, tập luyện hôm nay gặt hái tương lai.",
            "Hãy coi thức ăn là thuốc, đừng coi thuốc là thức ăn.",
            "Trí tuệ minh mẫn nằm trong một cơ thể tráng kiện."
        ];

        let myCharts = [];

        function toggleTheme() {
            const body = document.body;
            const current = body.getAttribute('data-theme');
            body.setAttribute('data-theme', current === 'dark' ? 'light' : 'dark');
        }

        function initQuote() {
            document.getElementById('quote-box').innerText = quotes[Math.floor(Math.random() * quotes.length)];
        }
        initQuote();

        document.getElementById('healthForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const name = document.getElementById('name').value;
            const weight = parseFloat(document.getElementById('weight').value);
            const height = parseFloat(document.getElementById('height').value) / 100;
            const age = parseInt(document.getElementById('age').value);
            const sleep = parseInt(document.getElementById('sleep').value);
            const exercise = parseInt(document.getElementById('exercise').value);

            const bmi = (weight / (height * height)).toFixed(1);
            
            // Show Report
            document.getElementById('empty-state').style.display = 'none';
            document.getElementById('report-content').style.display = 'block';

            // 1. BMI & Basic Logic
            document.getElementById('bmi-val').innerText = bmi;
            let bmiStatus = "";
            let critique = "";
            let mealA = "", mealB = "", sport = "";

            if (bmi < 18.5) {
                bmiStatus = "CƠ THỂ GẦY";
                critique = `AI nhận định ${name} đang thiếu hụt năng lượng. Việc chỉ ngủ ${sleep}h và vận động mức ${exercise} chưa giúp bạn tăng cơ. Bạn cần bổ sung Protein ngay lập tức.`;
                mealA = "Bún bò hoặc Phở thêm thịt, 1 ly sữa hạt.";
                mealB = "Cơm trắng, thịt kho tàu, canh xương, trái cây ngọt.";
                sport = "Tập Gym (khối lượng nặng), hạn chế Cardio quá nhiều.";
            } else if (bmi <= 24.9) {
                bmiStatus = "CÂN ĐỐI";
                critique = `Tuyệt vời! ${name} có chỉ số lý tưởng. AI khuyên bạn duy trì thói quen hiện tại nhưng hãy tối ưu giấc ngủ để da và não bộ khỏe hơn.`;
                mealA = "Yến mạch trái cây, trứng ốp la.";
                mealB = "Cơm gạo lứt, ức gà áp chảo, salad dầu oliu.";
                sport = "Chạy bộ, Bơi lội hoặc Yoga 30-45 phút.";
            } else {
                bmiStatus = "THỪA CÂN";
                critique = `${name}, AI phát hiện bạn đang có nguy cơ về tim mạch. BMI ${bmi} là con số biết nói. Việc lười vận động sẽ khiến mỡ nội tạng tích tụ nhanh hơn.`;
                mealA = "Khoai lang luộc, 2 quả trứng luộc, trà xanh không đường.";
                mealB = "Nhiều rau xanh, cá thu hoặc ức gà luộc, không ăn tinh bột trắng.";
                sport = "Đi bộ nhanh 60 phút hoặc đạp xe cường độ cao.";
            }

            document.getElementById('bmi-status').innerText = bmiStatus;
            document.getElementById('bmi-status').style.color = bmi > 25 ? "var(--danger)" : "var(--success)";
            document.getElementById('sleep-status').innerText = sleep >= 7 ? "Tốt" : "Thiếu ngủ";
            document.getElementById('burn-val').innerText = Math.round(weight * 24 * (exercise === 1 ? 1.2 : 1.5));
            document.getElementById('ai-critique').innerText = critique;
            document.getElementById('meal-morning').innerText = mealA;
            document.getElementById('meal-noon').innerText = mealB;
            document.getElementById('sport-suggest').innerText = sport;

            updateCharts(bmi, sleep, exercise);
            saveToHistory(name, bmi);
            initQuote();
        });

        function updateCharts(bmi, sleep, exercise) {
            myCharts.forEach(c => c.destroy());
            myCharts = [];

            const ctx1 = document.getElementById('chart1').getContext('2d');
            const ctx2 = document.getElementById('chart2').getContext('2d');

            myCharts.push(new Chart(ctx1, {
                type: 'bar',
                data: {
                    labels: ['BMI', 'Mục tiêu'],
                    datasets: [{
                        label: 'Chỉ số BMI',
                        data: [bmi, 22],
                        backgroundColor: ['#2563eb', '#10b981']
                    }]
                },
                options: { maintainAspectRatio: false }
            }));

            myCharts.push(new Chart(ctx2, {
                type: 'line',
                data: {
                    labels: ['Ngủ', 'Vận động', 'Nước', 'Stress'],
                    datasets: [{
                        label: 'Phong độ hiện tại (%)',
                        data: [sleep * 12.5, exercise * 20, 80, 40],
                        borderColor: '#7c3aed',
                        tension: 0.4
                    }]
                },
                options: { maintainAspectRatio: false }
            }));
        }

        function saveToHistory(name, bmi) {
            const list = document.getElementById('history-list');
            const div = document.createElement('div');
            div.className = 'history-item';
            div.innerHTML = `<i class="fas fa-check-circle" style="color:var(--success)"></i> <b>${name}</b> - BMI: ${bmi} <small>${new Date().toLocaleTimeString()}</small>`;
            list.prepend(div);
        }

        function resetForm() {
            document.getElementById('healthForm').reset();
            document.getElementById('report-content').style.display = 'none';
            document.getElementById('empty-state').style.display = 'block';
        }
    </script>
</body>
</html>
